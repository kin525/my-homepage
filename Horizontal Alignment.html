<script>
// 替換或更新此函數（只要把原本 spiralex() 改成下面內容即可）
function spiralex(bh, bn, be, tb, r, spl, ch, os) {
  bh = fix3(bh);
  bn = fix5(bn);
  be = fix5(be);
  tb = fix5(tb);
  r = fix3(r);
  spl = fix3(spl);
  ch = fix3(ch);
  os = fix3(os);

  const tb1 = deg(tb);
  const l1_init = fix3(ch) - fix3(bh);
  const rl = spl * r;

  const l1 = l1_init;
  const x = (Math.pow(l1, 3)) / (6 * rl) - (Math.pow(l1, 7)) / (336 * Math.pow(rl, 3))
    + (Math.pow(l1, 11)) / (42240 * Math.pow(rl, 5)) - (Math.pow(l1, 15)) / (9676800 * Math.pow(rl, 7));
  const y = l1 - (Math.pow(l1, 5)) / (40 * Math.pow(rl, 2)) + (Math.pow(l1, 9)) / (3456 * Math.pow(rl, 4))
    - (Math.pow(l1, 13)) / (599040 * Math.pow(rl, 6)) + (Math.pow(l1, 17)) / (175472640 * Math.pow(rl, 8));

  const nx = fix5(bn) + (y * fcos(tb1)) - (x * fsin(tb1));
  const ex = fix5(be) + (y * fsin(tb1)) + (x * fcos(tb1));
  const tb2 = (Math.pow(l1, 2)) / (2 * r * spl) * 180 / PI + tb1;

  // 修正：這裡應該用 ex（easting），不是 nx（northing）
  const e = fix4(fsin(tb2 + 90) * os + fix5(ex));
  return e;
}
</script>